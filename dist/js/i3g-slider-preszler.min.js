/*!
* i3g-slider-preszler - v0.1.6
* Homepage: http://i-3global.com
* Author: i3Global
* Author URL: http://i-3global.com/
*/

!function(e){"use strict";e.app=e.app||{},e.app.config=e.app.config||{API_SERVER:"/",API_PATH:"wp-json/acf/v2/",API_ENDPOINT:"options/slideshow"},e.serviceSlideshow=function(){function i(i,t){return t=t||{},i=i||{},e.extend(!0,{},i,t)}function t(i){var t=new RegExp(/\/Date\((\d*)\)\//),n=new Date;return e.each(i,function(e,i){i.Date?(i.Date=t.exec(i.Date)[1],n.setTime(i.Date),i.DateString=n.toLocaleDateString()):i.DateString="Special Event",i.CaptionBlack?i.CaptionColor="caption-black":i.CaptionColor="caption-white"}),i}function n(){var i,n=Q.defer();return i=l.API_SERVER+l.API_PATH+l.API_ENDPOINT,i="json/slideshow.json",console.log("url:",i),e.get(i,function(e){console.log("data",e.slideshow),c=t(e.slideshow),n.resolve(c)}),n.promise}function o(e){console.log("options:",e),l=i(r,e);var t=Q.defer();return null===c?t.resolve(n()):t.resolve(c),t.promise}var s={},l={},r=e.app.config,c=null;return r.API_ENDPOINT="options/slideshow",s.get=o,s.update=function(){return c=null,o()},s}}(jQuery),function(e){"use strict";e.fn.appSlideshow=function(){function i(i,t,n,o){var s=e(".slide").length-1,l=o-1>-1?o-1:s,r=o+1<=s?o+1:0,c="url("+a.slides[l].image.url+")",p="url("+a.slides[r].image.url+")";e(".prev-slide-image").css("background-image",c),e(".next-slide-image").css("background-image",p),e(".next-text").html(a.slides[r].title),e(".prev-text").html(a.slides[l].title)}function t(){(u=e(".slideshow")).slick({infinite:!0,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:8e3,dots:!0,arrows:!1,speed:500,fade:!0,cssEase:"linear",mobileFirst:!0}),u.on("beforeChange",i),e(".prev-slide-container").on("click",function(){u.slick("slickPrev")}),e(".next-slide-container").on("click",function(){u.slick("slickNext")}),i(null,null,null,0),setTimeout(function(){u.slick("slickNext")},100),s()}function n(i,t){return t=t||{},i=i||{},e.extend(!0,{},i,t)}function o(){e.serviceTemplateLoader().update(a,c).then(function(i){e(p).html(i),t()})}function s(){e(".prev-text").css("height",e(".prev-slide-text").width()),e(".next-text").css("height",e(".next-slide-text").width())}e.app=e.app||{},e.app.config=e.app.config||{},e.app.config.ASSETS_DIRECTORY=e("script[src*=i3g-slider-preszler]").attr("src").replace(/i3g-slider-preszler.js.*/gi,"")+"../";var l={},r=e.app.config,c={TEMPLATE_URL:(e.app.config.ASSETS_DIRECTORY||"")+"views/slideshow.html",TEMPLATE:""},a={slides:[]},p=this.selector,u={};return this.init=function(){l=n(r,c),o(),console.log("Init Directive"),e.serviceSlideshow().get().then(function(e){console.log("returned from Service:",e),a.slides=e,o()}),e(window).on("resize",s)},this.init(),this},e(".app-slideshow").appSlideshow()}(jQuery);